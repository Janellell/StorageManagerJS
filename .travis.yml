sudo: required
dist: trusty
language: node_js
node_js:
addons:
  firefox: "latest"
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable
script: cross-env NODE_ENV=test node_modules/karma/bin/karma start --single-run --no-auto-watch config/karma.conf.js
before_install:
  - env PHANTOMJS_BIN=/usr/local/phantomjs/bin/phantomjs
  - sudo apt-get -qq update
  - sudo apt-get install -y phantomjs libicu52 libxml2 libxslt1.1 libhyphen0 libwebp5 software-properties-common
  - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y && sudo apt-get -qq update && sudo apt-get install -y gcc-4.9 g++-4.9
  - wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.5.0-beta-linux-ubuntu-trusty-x86_64.tar.gz && tar xvf phantomjs-2.5.0-beta-linux-ubuntu-trusty-x86_64.tar.gz && chmod +x phantomjs-2.5.0-beta-ubuntu-trusty/bin/phantomjs && sudo cp phantomjs-2.5.0-beta-ubuntu-trusty/bin/phantomjs /usr/local/bin && rm -rf phantomjs* && phantomjs --version
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sleep 3